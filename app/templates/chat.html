{% extends "layout.html" %}
{% block content %}            
    <div id="chat_window" class="container-fluid">
        <div class="row">
            <div class="col-md-4">
                <h1>Room: {{ room }}</h1>
            </div>
            <div class="col-md-3">
                <button type="button" id="clear_msgs" class="btn btn-danger">Clear</button>
                <button type="button" class="btn btn-info" data-toggle="modal" data-target="#settings_modal">Settings</button>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-md-3 hidden-sm">
                <h3>Users</h3>
                <ul id="user_list">
                    <li>
                        <img class="user-image" src="/static/imgs/avatars/{{avatar}}">
                        You
                    </li>
                </ul>
            </div>
            <!-- Chat Content -->
            <div class="col-xs-12 col-md-9">
                <ul id="chat">
                    <li class="row typing" data-user="" data-date="">
                        <div class="col-sm-1 col-md-1 user_image">
                            <img class="img-responsive typing_avatar" src="">
                        </div>
                        <div class="col-sm-8">
                            <h3></h3><br/>
                            <span class="msg_content">
                                <img src="/static/imgs/typing.gif">
                            </span>                            
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Chat TextBox -->
        <div id="text_box" class="row col-md-9 col-md-offset-3 form-group form-group-lg">
            <label class="col-sm-1 control-label" for="formGroupInputLarge">
                <img height="50" width="50" src="/static/imgs/avatars/{{avatar}}">
            </label>
            <div class="col-sm-10">
                <div class="input-group">
                    <textarea id="text" class="form-control" type="text" id="formGroupInputLarge" placeholder="Type type type"></textarea>
                    <div class="input-group-addon"><button id="send" class="btn btn-primary">Send</button></div>
                </div>
            </div>
        </div>     
        <!-- <a href="#" onclick="leave_room();">Leave this room</a> -->
    </div>

    <!-- Modal -->
    <div id="settings_modal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Settings</h4>
          </div>
          <div class="modal-body">
            NOT WORKING!
            <form>
                Enable Audio
            </form>
            <div>
                DEBUG
                <br>
                username: {{username}}
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>    
{% endblock %}

{% block script %}
    <script type="text/javascript">
        CHATSEC.init(["{{name}}", "password", "{{avatar}}"]);
        $(document).ready(function(){
            CHATSEC.launch();
        });
    </script>
{% endblock %}